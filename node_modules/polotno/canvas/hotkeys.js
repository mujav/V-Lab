"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.handleHotkey=void 0;let clipBoard=[];function handleHotkey(e,t){var l,o,d,n;if("INPUT"===(null===(l=document.activeElement)||void 0===l?void 0:l.tagName)||"TEXTAREA"===(null===(o=document.activeElement)||void 0===o?void 0:o.tagName)||"true"===(null===(d=document.activeElement)||void 0===d?void 0:d.contentEditable))return;46!==e.keyCode&&8!==e.keyCode||t.deleteElements(t.selectedElementsIds);const c=e.ctrlKey||e.metaKey,r=e.shiftKey;if(c&&"KeyZ"===e.code&&(e.preventDefault(),t.history.undo()),c&&r&&"KeyZ"===e.code&&(e.preventDefault(),t.history.redo()),c&&"KeyA"===e.code){e.preventDefault();const l=null===(n=t.activePage)||void 0===n?void 0:n.children.filter((e=>e.selectable)),o=(null==l?void 0:l.map((e=>e.id)))||[];t.selectElements(o)}if(c&&"KeyC"===e.code&&(e.preventDefault(),clipBoard=t.selectedElements.map((e=>e.toJSON()))),c&&"KeyX"===e.code&&(e.preventDefault(),clipBoard=t.selectedElements.map((e=>e.toJSON())),t.deleteElements(t.selectedElementsIds)),c&&"KeyV"===e.code){e.preventDefault();const l=t.width/20;t.history.transaction((()=>{const e=[];clipBoard.forEach((o=>{var d;delete o.id,o.x+=l,o.y+=l;const n=null===(d=t.activePage)||void 0===d?void 0:d.addElement(o);e.push(null==n?void 0:n.id)})),t.selectElements(e)})),t.history.redo()}"ArrowDown"===e.code&&(e.preventDefault(),t.selectedElements.forEach((e=>{e.set({y:e.y+1})}))),"ArrowUp"===e.code&&(e.preventDefault(),t.selectedElements.forEach((e=>{e.set({y:e.y-1})}))),"ArrowLeft"===e.code&&(e.preventDefault(),t.selectedElements.forEach((e=>{e.set({x:e.x-1})}))),"ArrowRight"===e.code&&(e.preventDefault(),t.selectedElements.forEach((e=>{e.set({x:e.x+1})})))}exports.handleHotkey=handleHotkey;