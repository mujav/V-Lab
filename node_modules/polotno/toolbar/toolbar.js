"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Toolbar=exports.registerToolbarComponent=void 0;const react_1=__importDefault(require("react")),mobx_react_lite_1=require("mobx-react-lite"),core_1=require("@blueprintjs/core"),styled_1=__importDefault(require("../utils/styled")),history_buttons_1=require("./history-buttons"),text_toolbar_1=require("./text-toolbar"),html_toolbar_1=require("./html-toolbar"),image_toolbar_1=require("./image-toolbar"),svg_toolbar_1=require("./svg-toolbar"),download_button_1=require("./download-button"),duplicate_button_1=require("./duplicate-button"),remove_button_1=require("./remove-button"),lock_button_1=require("./lock-button"),position_picker_1=require("./position-picker"),opacity_picker_1=require("./opacity-picker"),admin_button_1=require("./admin-button"),flags_1=require("../utils/flags"),ComponentsTypes={text:text_toolbar_1.TextToolbar,image:image_toolbar_1.ImageToolbar,svg:svg_toolbar_1.SvgToolbar};function registerToolbarComponent(e,t){ComponentsTypes[e]=t}exports.registerToolbarComponent=registerToolbarComponent;const NavbarContainer=(0,styled_1.default)("div")`
  @media screen and (max-width: 500px) {
    max-width: 100vw;
    overflow-x: auto;
    overflow-y: hidden;
  }
`,NavInner=(0,styled_1.default)("div")`
  width: 100%;
  height: 100%;
  @media screen and (max-width: 500px) {
    display: flex;
  }
`;exports.Toolbar=(0,mobx_react_lite_1.observer)((({store:e,downloadButtonEnabled:t,hideTextFontFamily:o,hideTextSpacing:r,hideTextEffects:a,hideImageFlip:l,hideImageEffects:i,hideImageCrop:n,hideImageFit:s,hideSvgEffects:d,hidePosition:_,hideOpacity:c,hideDuplicate:u,hideLock:m,hideRemove:p,components:b})=>{const f=1===new Set(e.selectedElements.map((e=>e.type))).size,h=1===e.selectedElements.length,g=e.selectedElements[0],v=e.selectedElements.every((e=>e.styleEditable)),x=e.selectedElements.every((e=>e.draggable));let y=v&&h&&ComponentsTypes[g.type];f&&"text"===(null==g?void 0:g.type)&&(y=ComponentsTypes[g.type]),h&&"text"===g.type&&flags_1.flags.htmlRenderEnabled&&(y=html_toolbar_1.HtmlToolbar);const E=h&&g._cropModeEnabled,T=(null==b?void 0:b.ActionControls)||(t?download_button_1.DownloadButton:null);return react_1.default.createElement(NavbarContainer,{className:"bp4-navbar"},react_1.default.createElement(NavInner,null,!E&&react_1.default.createElement(history_buttons_1.HistoryButtons,{store:e}),y&&v&&react_1.default.createElement(y,{store:e,hideTextFontFamily:o,hideTextSpacing:r,hideTextEffects:a,hideImageFlip:l,hideImageEffects:i,hideImageCrop:n,hideImageFit:s,hideSvgEffects:d}),!E&&react_1.default.createElement(core_1.Navbar.Group,{align:core_1.Alignment.RIGHT},"admin"===e.role&&react_1.default.createElement(admin_button_1.AdminButton,{store:e}),!_&&x&&react_1.default.createElement(position_picker_1.PositionPicker,{store:e}),!c&&v&&react_1.default.createElement(opacity_picker_1.OpacityPicker,{store:e}),!m&&react_1.default.createElement(lock_button_1.LockButton,{store:e}),!u&&react_1.default.createElement(duplicate_button_1.DuplicateButton,{store:e}),!p&&react_1.default.createElement(remove_button_1.RemoveButton,{store:e}),T&&react_1.default.createElement(react_1.default.Fragment,null,react_1.default.createElement(core_1.Divider,{style:{height:"100%",margin:"0 15px"}}),react_1.default.createElement(T,{store:e})))))})),exports.default=exports.Toolbar;